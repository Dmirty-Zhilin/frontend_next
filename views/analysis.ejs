<div class="analysis-container">
    <h1 class="mt-4 mb-4">Анализ доменов</h1>
    
    <div class="analysis-tabs">
        <div class="tab-header">
            <button class="tab-btn active" data-tab="single">Одиночный анализ</button>
            <button class="tab-btn" data-tab="batch">Пакетный анализ</button>
            <button class="tab-btn" data-tab="advanced">Расширенные настройки</button>
        </div>
        
        <div class="tab-content active" id="single-tab">
            <div class="analysis-form">
                <h2>Анализ одиночного домена</h2>
                <p>Введите домен для анализа и получите подробный отчет о его истории и потенциале</p>
                
                <form action="/analysis/single" method="POST">
                    <div class="form-group">
                        <label for="domain">Домен для анализа</label>
                        <input type="text" id="domain" name="domain" placeholder="example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="depth">Глубина анализа</label>
                        <select id="depth" name="depth">
                            <option value="basic">Базовый анализ</option>
                            <option value="standard" selected>Стандартный анализ</option>
                            <option value="deep">Глубокий анализ</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>Параметры анализа</label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" name="params[]" value="history" checked>
                                История домена
                            </label>
                            <label>
                                <input type="checkbox" name="params[]" value="content" checked>
                                Анализ контента
                            </label>
                            <label>
                                <input type="checkbox" name="params[]" value="backlinks" checked>
                                Обратные ссылки
                            </label>
                            <label>
                                <input type="checkbox" name="params[]" value="metrics" checked>
                                Метрики и показатели
                            </label>
                            <label>
                                <input type="checkbox" name="params[]" value="ai" checked>
                                AI-рекомендации
                            </label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Начать анализ</button>
                </form>
            </div>
            
            <div class="recent-domains">
                <h3>Недавно проанализированные домены</h3>
                <div class="domain-list">
                    <div class="domain-item">
                        <div class="domain-name">example.com</div>
                        <div class="domain-date">21.05.2025</div>
                        <div class="domain-score">85/100</div>
                        <a href="/reports/domain/example.com" class="btn btn-sm btn-outline">Отчет</a>
                    </div>
                    <div class="domain-item">
                        <div class="domain-name">sample-domain.org</div>
                        <div class="domain-date">20.05.2025</div>
                        <div class="domain-score">72/100</div>
                        <a href="/reports/domain/sample-domain.org" class="btn btn-sm btn-outline">Отчет</a>
                    </div>
                    <div class="domain-item">
                        <div class="domain-name">test-site.net</div>
                        <div class="domain-date">19.05.2025</div>
                        <div class="domain-score">91/100</div>
                        <a href="/reports/domain/test-site.net" class="btn btn-sm btn-outline">Отчет</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="batch-tab">
            <div class="analysis-form">
                <h2>Пакетный анализ доменов</h2>
                <p>Загрузите список доменов для массового анализа и получения сводного отчета</p>
                
                <form action="/analysis/batch" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="domain-file">Файл со списком доменов</label>
                        <input type="file" id="domain-file" name="domainFile" accept=".txt,.csv" required>
                        <small>Поддерживаемые форматы: TXT, CSV. Один домен на строку.</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="batch-name">Название анализа</label>
                        <input type="text" id="batch-name" name="batchName" placeholder="Мой анализ доменов" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="batch-depth">Глубина анализа</label>
                        <select id="batch-depth" name="depth">
                            <option value="basic">Базовый анализ</option>
                            <option value="standard" selected>Стандартный анализ</option>
                            <option value="deep">Глубокий анализ</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Начать пакетный анализ</button>
                </form>
            </div>
            
            <div class="batch-history">
                <h3>История пакетных анализов</h3>
                <div class="batch-list">
                    <div class="batch-item">
                        <div class="batch-name">Майские дропы</div>
                        <div class="batch-date">18.05.2025</div>
                        <div class="batch-count">500 доменов</div>
                        <div class="batch-status">Завершен</div>
                        <a href="/reports/batch/001" class="btn btn-sm btn-outline">Отчет</a>
                    </div>
                    <div class="batch-item">
                        <div class="batch-name">Тестовая выборка</div>
                        <div class="batch-date">15.05.2025</div>
                        <div class="batch-count">100 доменов</div>
                        <div class="batch-status">Завершен</div>
                        <a href="/reports/batch/002" class="btn btn-sm btn-outline">Отчет</a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="advanced-tab">
            <div class="advanced-settings">
                <h2>Расширенные настройки анализа</h2>
                <p>Настройте параметры анализа для получения более точных результатов</p>
                
                <form action="/analysis/settings" method="POST">
                    <div class="settings-section">
                        <h3>Параметры Wayback Machine</h3>
                        <div class="form-group">
                            <label for="min-snapshots">Минимальное количество снапшотов</label>
                            <input type="number" id="min-snapshots" name="minSnapshots" value="5" min="1">
                        </div>
                        <div class="form-group">
                            <label for="date-range">Диапазон дат</label>
                            <select id="date-range" name="dateRange">
                                <option value="all">Все время</option>
                                <option value="last-year">Последний год</option>
                                <option value="last-5-years" selected>Последние 5 лет</option>
                                <option value="last-10-years">Последние 10 лет</option>
                                <option value="custom">Указать вручную</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Параметры анализа контента</h3>
                        <div class="form-group">
                            <label for="content-depth">Глубина анализа контента</label>
                            <select id="content-depth" name="contentDepth">
                                <option value="basic">Базовый (только заголовки)</option>
                                <option value="standard" selected>Стандартный (заголовки и основной контент)</option>
                                <option value="deep">Глубокий (полный анализ страницы)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="language">Предпочтительный язык</label>
                            <select id="language" name="language">
                                <option value="auto" selected>Автоопределение</option>
                                <option value="en">Английский</option>
                                <option value="ru">Русский</option>
                                <option value="multi">Многоязычный</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Параметры AI-рекомендаций</h3>
                        <div class="form-group">
                            <label for="ai-model">Модель AI</label>
                            <select id="ai-model" name="aiModel">
                                <option value="standard" selected>Стандартная</option>
                                <option value="advanced">Расширенная</option>
                                <option value="expert">Экспертная</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Факторы для анализа</label>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" name="aiFactors[]" value="seo" checked>
                                    SEO-потенциал
                                </label>
                                <label>
                                    <input type="checkbox" name="aiFactors[]" value="brand" checked>
                                    Брендовый потенциал
                                </label>
                                <label>
                                    <input type="checkbox" name="aiFactors[]" value="traffic" checked>
                                    Потенциал трафика
                                </label>
                                <label>
                                    <input type="checkbox" name="aiFactors[]" value="monetization" checked>
                                    Потенциал монетизации
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Сохранить настройки</button>
                    <button type="reset" class="btn btn-secondary">Сбросить по умолчанию</button>
                </form>
            </div>
        </div>
    </div>
</div>

<% const extraScripts = ['/js/components/analysis.js']; %>
