// ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ‹Ð¹ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ð´Ð»Ñ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ñ‚ÐµÐ¼Ñ‹
document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle');
    const htmlRoot = document.documentElement;
    const bodyElement = document.body;
    const themeIcon = document.querySelector('.theme-toggle-icon');
    
    // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ñ‚ÐµÐ¼Ñ‹
    function toggleTheme() {
        const currentTheme = htmlRoot.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        
        // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ‚ÐµÐ¼Ñƒ Ðº HTML Ð¸ BODY ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð¼
        htmlRoot.setAttribute('data-theme', newTheme);
        bodyElement.setAttribute('data-theme', newTheme);
        
        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð¸ÐºÐ¾Ð½ÐºÑƒ
        themeIcon.textContent = newTheme === 'light' ? 'ðŸŒ™' : 'â˜€ï¸';
        
        // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð²Ñ‹Ð±Ð¾Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² ÐºÑƒÐºÐ¸
        document.cookie = `theme=${newTheme}; path=/; max-age=31536000`;
        
        // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ theme-dependent
        const themeElements = document.querySelectorAll('.theme-dependent');
        themeElements.forEach(element => {
            element.setAttribute('data-theme', newTheme);
        });
    }
    
    // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð´Ð»Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ñ‚ÐµÐ¼Ñ‹
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ: Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ Ðº body
    const currentTheme = htmlRoot.getAttribute('data-theme') || 'light';
    bodyElement.setAttribute('data-theme', currentTheme);
    
    // Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ: Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ñ‚ÐµÐ¼Ñƒ ÐºÐ¾ Ð²ÑÐµÐ¼ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ð¼ Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ theme-dependent
    const themeElements = document.querySelectorAll('.theme-dependent');
    themeElements.forEach(element => {
        element.setAttribute('data-theme', currentTheme);
    });
});
